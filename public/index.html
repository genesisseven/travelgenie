<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Travel Genie</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="overlay"></div>

  <div class="chat-container">
    <div class="chat-bubble">
      <textarea
        id="userInput"
        placeholder="Where would you like to travel?"
      ></textarea>
      <button id="sendBtn">Go</button>
    </div>
    <div id="responseContainer"></div>
  </div>

  <script>
    // (front-end placeholder only â€“ real key lives in server/.env)
    const API_KEY = "YOUR_CHATGPT_SECRET_KEY";
    const sendBtn = document.getElementById("sendBtn");
    const responseContainer = document.getElementById("responseContainer");

    sendBtn.addEventListener("click", async () => {
      const prompt = document.getElementById("userInput").value.trim();
      if (!prompt) return;

      // Unhide and clear the response area
      responseContainer.style.display = "block";
      responseContainer.innerHTML = "<p>Loading...</p>";

      try {
        const res = await fetch("/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt }),
        });
        const { reply } = await res.json();
        responseContainer.innerHTML = `<div class="reply">${reply
          .replace(/\n/g, "<br>")
        }</div>`;
      } catch (err) {
        responseContainer.innerHTML =
          "<p>Something went wrong. Please try again.</p>";
        console.error(err);
      }
    });
  </script>
</body>
</html>
